---
created: 2017-09-07 20:33:56
jarvis_ai_meta:
  key_people: []
  mood: 专注、兴奋、有成就感
  summary: 用户重做Python数据分析第一课，练习了股票数据读取、索引切片和可视化，并总结了.loc与.iloc的区别。
  tagged_at: '2026-01-11 02:03:34'
  time_space:
    date: '2017-09-07'
    location: ''
source: file:///private/var/mobile/Containers/Data/Application/D77A9F52-20D1-491E-94D1-81F8B444D129/tmp/www/bobo%E9%87%8D%E5%81%9A%E7%AC%AC%E4%B8%80%E8%AF%BE%20(1).html
tags:
- 数据分析
- 股票数据
- Pandas
- Python
- 索引切片
updated: 2017-09-07 20:33:56
---

# bobo重做第一课

**import** **pandas** **as** **pd**
%**matplotlib** inline

In \[4\]:

_\## stock = pd.read\_csv('stock',parse\_dates =True,index\_col='Date')_
_\## !! 文件名后面要加格式，才能被引用啊！  老犯这个错误_
stock \= pd.read\_csv('stock.csv',parse\_dates \=**True**,index\_col\='Date')
stock.head() 

Out\[4\]:

|     | Open | High | Low | Close | Volume |
| --- | --- | --- | --- | --- | --- |
| Date |     |     |     |     |     |
| --- | --- | --- | --- | --- | --- |
| 2017-06-01 | 153.17 | 153.33 | 152.22 | 153.18 | 16404088 |
| 2017-06-02 | 153.58 | 155.45 | 152.89 | 155.45 | 27770715 |
| 2017-06-05 | 154.34 | 154.45 | 153.46 | 153.93 | 25331662 |
| 2017-06-06 | 153.90 | 155.81 | 153.78 | 154.45 | 26624926 |
| 2017-06-07 | 155.02 | 155.98 | 154.48 | 155.37 | 21069647 |

In \[5\]:

stock.shape 

Out\[5\]:

(22, 5)

In \[6\]:

stock.columns 

Out\[6\]:

Index(\['Open', 'High', 'Low', 'Close', 'Volume'\], dtype='object')

In \[11\]:

stock.describe()
_##!!  错误点1 少输入了括号，为什么有些要加括号，有些不加呢？_
_\##  错误点2 ，单词总是打错_ 

Out\[11\]:

|     | Open | High | Low | Close | Volume |
| --- | --- | --- | --- | --- | --- |
| count | 22.000000 | 22.000000 | 22.000000 | 22.000000 | 2.200000e+01 |
| mean | 148.215000 | 149.088636 | 146.582727 | 147.831364 | 3.109900e+07 |
| std | 4.450871 | 4.337027 | 4.507623 | 4.434315 | 1.416738e+07 |
| min | 143.320000 | 144.480000 | 142.200000 | 142.270000 | 1.640409e+07 |
| 25% | 144.785000 | 146.095000 | 143.630000 | 145.047500 | 2.231785e+07 |
| 50% | 146.320000 | 147.015000 | 145.025000 | 145.850000 | 2.615864e+07 |
| 75% | 153.477500 | 154.170000 | 150.670000 | 152.130000 | 3.244740e+07 |
| max | 155.250000 | 155.980000 | 154.480000 | 155.450000 | 7.230733e+07 |

In \[12\]:

stock.plot() 

Out\[12\]:

<matplotlib.axes.\_subplots.AxesSubplot at 0x21d86f6e128>

In \[14\]:

stock.Close.plot() 

Out\[14\]:

<matplotlib.axes.\_subplots.AxesSubplot at 0x21d86f8c8d0>

接下来是索引和切片 我认为这些事第一课最有价值的地方。

In \[17\]:

print(stock.Open)
print (stock\['Close'\])
_\## @ stock.Open,意味着stock这个文件中的Open这列的数据。_ 

Date
2017-06-01    153.17
2017-06-02    153.58
2017-06-05    154.34
2017-06-06    153.90
2017-06-07    155.02
2017-06-08    155.25
2017-06-09    155.19
2017-06-12    145.74
2017-06-13    147.16
2017-06-14    147.50
2017-06-15    143.32
2017-06-16    143.78
2017-06-19    143.66
2017-06-20    146.87
2017-06-21    145.52
2017-06-22    145.77
2017-06-23    145.13
2017-06-26    147.17
2017-06-27    145.01
2017-06-28    144.49
2017-06-29    144.71
2017-06-30    144.45
Name: Open, dtype: float64
Date
2017-06-01    153.18
2017-06-02    155.45
2017-06-05    153.93
2017-06-06    154.45
2017-06-07    155.37
2017-06-08    154.99
2017-06-09    148.98
2017-06-12    145.42
2017-06-13    146.59
2017-06-14    145.16
2017-06-15    144.29
2017-06-16    142.27
2017-06-19    146.34
2017-06-20    145.01
2017-06-21    145.87
2017-06-22    145.63
2017-06-23    146.28
2017-06-26    145.82
2017-06-27    143.73
2017-06-28    145.83
2017-06-29    143.68
2017-06-30    144.02
Name: Close, dtype: float64

In \[32\]:

_\## 接下来是精确索引，感觉超有用！_
print(stock.Close\['2017-06-01'\])
print(stock\['Open'\]\['2017-06-02'\])
_\### 确实很好用，这个功能。_ 

153.18
153.58

In \[20\]:

stock\['Close'\]\[0\] 

Out\[20\]:

153.18000000000001

In \[21\]:

stock\[\['Close'\]\]
_\### 这个双层方括号，意思是只显示close的列_ 

Out\[21\]:

|     | Close |
| --- | --- |
| Date |     |
| --- | --- |
| 2017-06-01 | 153.18 |
| 2017-06-02 | 155.45 |
| 2017-06-05 | 153.93 |
| 2017-06-06 | 154.45 |
| 2017-06-07 | 155.37 |
| 2017-06-08 | 154.99 |
| 2017-06-09 | 148.98 |
| 2017-06-12 | 145.42 |
| 2017-06-13 | 146.59 |
| 2017-06-14 | 145.16 |
| 2017-06-15 | 144.29 |
| 2017-06-16 | 142.27 |
| 2017-06-19 | 146.34 |
| 2017-06-20 | 145.01 |
| 2017-06-21 | 145.87 |
| 2017-06-22 | 145.63 |
| 2017-06-23 | 146.28 |
| 2017-06-26 | 145.82 |
| 2017-06-27 | 143.73 |
| 2017-06-28 | 145.83 |
| 2017-06-29 | 143.68 |
| 2017-06-30 | 144.02 |

In \[22\]:

stock\[\['Open','Close'\]\]
_##@ 这功能真的太好用了吧。  相当于剪切两列数据在一起，然后拼凑成新表格，这excle中，要好多次的操作才能实现哦。_ 
_\## 我之前还想 好好地学习excle来增进计算技能，现在看来，不用了耶，直接深挖python的函数和方法，能直接省去好多环节，哈哈哈哈我爱python_ 

Out\[22\]:

|     | Open | Close |
| --- | --- | --- |
| Date |     |     |
| --- | --- | --- |
| 2017-06-01 | 153.17 | 153.18 |
| 2017-06-02 | 153.58 | 155.45 |
| 2017-06-05 | 154.34 | 153.93 |
| 2017-06-06 | 153.90 | 154.45 |
| 2017-06-07 | 155.02 | 155.37 |
| 2017-06-08 | 155.25 | 154.99 |
| 2017-06-09 | 155.19 | 148.98 |
| 2017-06-12 | 145.74 | 145.42 |
| 2017-06-13 | 147.16 | 146.59 |
| 2017-06-14 | 147.50 | 145.16 |
| 2017-06-15 | 143.32 | 144.29 |
| 2017-06-16 | 143.78 | 142.27 |
| 2017-06-19 | 143.66 | 146.34 |
| 2017-06-20 | 146.87 | 145.01 |
| 2017-06-21 | 145.52 | 145.87 |
| 2017-06-22 | 145.77 | 145.63 |
| 2017-06-23 | 145.13 | 146.28 |
| 2017-06-26 | 147.17 | 145.82 |
| 2017-06-27 | 145.01 | 143.73 |
| 2017-06-28 | 144.49 | 145.83 |
| 2017-06-29 | 144.71 | 143.68 |
| 2017-06-30 | 144.45 | 144.02 |

##### .loc 的作用到底是什么呢？[](about:///%23.loc-%E7%9A%84%E4%BD%9C%E7%94%A8%E5%88%B0%E5%BA%95%E6%98%AF%E4%BB%80%E4%B9%88%E5%91%A2%EF%BC%9F)

有点不记得了，这次好好体验试试吧

In \[30\]:

stock.loc\['2017-06-01','Close'\]
_\## @ 我尝试把日期放在后面，发现不行，原理应该是先读取索引列，这个数据的索引列是“date”，只有先在索引列种寻找，才可以进行下一步。_ 

Out\[30\]:

153.18000000000001

#### 感悟：[](about:///%23%E6%84%9F%E6%82%9F%EF%BC%9A)

[_ 直接索引，比如stock.Cloes'2017-06-01，是从列开始找数据. 是先找到close这列，然后再去找其中的时间对应项。 而.loc则像是先找时间项。](about:///%23%E6%84%9F%E6%82%9F%EF%BC%9A) 
[_ 这种感觉就像一个军官，来巡视十字方队的军人。](about:///%23%E6%84%9F%E6%82%9F%EF%BC%9A) 
[_ A军官，从方队的西北角走来，先是横着走，去找到某个士兵](about:///%23%E6%84%9F%E6%82%9F%EF%BC%9A)
[_ 而B军官（.loc），则是竖着走，去找到某个士兵。__ 那么C军官（.iloc）呢？ 慢慢摸索吧__In 37___stock.loc_,'Close'__@ ：冒号的意思，原本是x：y，即索引列种第x到第y之间的数据，如果只是冒号，](about:///%23%E6%84%9F%E6%82%9F%EF%BC%9A)
[](about:///%23%E6%84%9F%E6%82%9F%EF%BC%9A)
[](about:///%23%E6%84%9F%E6%82%9F%EF%BC%9A)
[](about:///%23%E6%84%9F%E6%82%9F%EF%BC%9A)

### [过滤](about:///%23%E6%84%9F%E6%82%9F%EF%BC%9A)[](about:///%23%E8%BF%87%E6%BB%A4)

[我的理解是这个过滤相当于筛选功能](about:///%23%E8%BF%87%E6%BB%A4)
[](about:///%23%E8%BF%87%E6%BB%A4)
[](about:///%23%E8%BF%87%E6%BB%A4)
[In 59___stock.Volume_5e7___ 原来这是一个布尔索引啊，不能够直接显示是哪些明细吗？_ __Out59___Date_2017-06-01    False_2017-06-02    False_2017-06-05    False_2017-06-06    False_2017-06-07    False_2017-06-08    False_2017-06-0](about:///%23%E8%BF%87%E6%BB%A4)
[](about:///%23%E8%BF%87%E6%BB%A4)
[](about:///%23%E8%BF%87%E6%BB%A4)
[](about:///%23%E8%BF%87%E6%BB%A4)

#### [布尔运算是有规则的](about:///%23%E8%BF%87%E6%BB%A4)[](about:///%23%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97%E6%98%AF%E6%9C%89%E8%A7%84%E5%88%99%E7%9A%84)

[_ and 且](about:///%23%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97%E6%98%AF%E6%9C%89%E8%A7%84%E5%88%99%E7%9A%84)
[_ or 或](about:///%23%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97%E6%98%AF%E6%9C%89%E8%A7%84%E5%88%99%E7%9A%84)
[_ not 非](about:///%23%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97%E6%98%AF%E6%9C%89%E8%A7%84%E5%88%99%E7%9A%84)
[In 70____ stockstock.Close_stock.Open&stock.Volume_3e7__stock(stock.Close_stock.Open)&(stock.Volume_3e7)__!!! 我在原来代码中，没有加括号，这实在是个失误。 为什么呢？其实复杂运算都是要加括号的啊____@@这是and](about:///%23%E5%B8%83%E5%B0%94%E8%BF%90%E7%AE%97%E6%98%AF%E6%9C%89%E8%A7%84%E5%88%99%E7%9A%84)