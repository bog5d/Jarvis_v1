<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jarvis - å†…é˜é¦–è¾…</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0" />
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        body { font-family: 'Roboto', sans-serif; background-color: #F0F4F9; }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #D1D5DB; border-radius: 4px; }
        .markdown-body h1 { font-size: 1.5em; font-weight: bold; margin: 0.5em 0; }
        .markdown-body p { margin-bottom: 0.8em; line-height: 1.6; }
        .markdown-body ul { list-style-type: disc; padding-left: 1.5em; margin-bottom: 0.8em; }
        .markdown-body code { background-color: #E5E7EB; padding: 0.2em 0.4em; border-radius: 4px; font-family: monospace; font-size: 0.9em; color: #C7254E; }
        .markdown-body pre { background-color: #1F2937; color: #F9FAFB; padding: 1em; border-radius: 8px; overflow-x: auto; margin-bottom: 1em; }
        .markdown-body pre code { background-color: transparent; color: #E5E7EB; padding: 0; }
    </style>
</head>
<body class="flex h-screen overflow-hidden text-[#1F1F1F]">

    <!-- å·¦ä¾§è¾¹æ  -->
    <aside id="sidebar" class="w-[280px] bg-[#F0F4F9] flex flex-col p-4 hidden md:flex flex-shrink-0 transition-all">
        <div class="flex items-center justify-between mb-8">
            <button onclick="toggleSidebar()" class="p-2 rounded-full hover:bg-[#E3E3E3]"><span class="material-symbols-outlined">menu</span></button>
        </div>
        <button class="flex items-center gap-3 bg-[#D3E3FD] text-[#001D35] px-4 py-3 rounded-2xl hover:shadow-md mb-6 w-fit">
            <span class="material-symbols-outlined">add</span><span class="text-sm font-medium">æ–°å¥æŠ˜</span>
        </button>
        <div class="flex-1 overflow-y-auto">
            <div class="mb-4"><h3 class="text-xs font-medium text-gray-500 mb-2 px-3">æœ€è¿‘</h3>
                <div onclick="togglePanel()" class="flex items-center gap-3 px-3 py-2 rounded-full bg-[#D3E3FD] text-[#001D35] cursor-pointer hover:bg-[#C2D7FB]">
                    <span class="material-symbols-outlined">chat_bubble</span><span class="text-sm truncate">ğŸ“… æ¯æ—¥å†…é˜æ™¨æŠ¥</span>
                </div>
            </div>
        </div>
    </aside>

    <!-- ä¸»åŒºåŸŸ -->
    <main class="flex-1 flex bg-white md:rounded-l-3xl shadow-sm relative overflow-hidden">
        <!-- èŠå¤©åŒº -->
        <div id="chat-container" class="flex-1 overflow-y-auto p-4 md:p-8 pb-32 transition-all duration-300">
            <div id="messages" class="max-w-[800px] mx-auto space-y-8">
                <!-- æ¬¢è¿è¯­ -->
                <div class="flex flex-col items-center justify-center py-10 opacity-80">
                    <span class="material-symbols-outlined text-6xl text-[#1967D2] mb-4">smart_toy</span>
                    <h1 class="text-4xl font-medium text-gray-800">ä½ å¥½, ç‹æ€»</h1>
                    <p class="text-xl text-gray-400 mt-2">ä»Šæ—¥å†…é˜æ™¨æŠ¥å·²å‡†å¤‡å°±ç»ªã€‚</p>
                </div>
                <!-- æ¨¡æ‹Ÿæ¶ˆæ¯ -->
                <div class="flex gap-4">
                    <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white mt-1 flex-shrink-0"><span class="material-symbols-outlined text-sm">smart_toy</span></div>
                    <div class="flex-1">
                        <p>ä»Šæ—¥æ™¨æŠ¥å·²å‡†å¤‡å°±ç»ªã€‚</p>
                        <button onclick="togglePanel()" class="mt-2 flex items-center gap-2 bg-[#D3E3FD] text-[#001D35] px-4 py-2 rounded-xl hover:shadow-md transition cursor-pointer">
                            <span class="material-symbols-outlined">description</span><span>ç‚¹å‡»æŸ¥çœ‹å®Œæ•´æ™¨æŠ¥</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- å³ä¾§é˜…è¯»é¢æ¿ (é»˜è®¤éšè—) -->
        <div id="reading-panel" class="hidden w-0 border-l border-gray-200 bg-white flex flex-col transition-all duration-300">
            <div class="flex items-center justify-between p-4 border-b"><h2 class="font-medium">ğŸ“… æ¯æ—¥å†…é˜æ™¨æŠ¥</h2><button onclick="togglePanel()" class="p-2 hover:bg-gray-100 rounded-full"><span class="material-symbols-outlined">close</span></button></div>
            <div id="panel-content" class="p-6 overflow-y-auto markdown-body flex-1">
                <!-- å†…å®¹å°†ç”± JS å¡«å…… -->
            </div>
        </div>

        <!-- è¾“å…¥æ¡† -->
        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-white via-white to-transparent pt-10 pb-6 px-4">
            <div class="max-w-[800px] mx-auto bg-[#F0F4F9] rounded-[2rem] flex items-center px-4 py-2 border border-transparent focus-within:border-gray-200 focus-within:bg-white focus-within:shadow-md transition-all">
                <button class="p-2 rounded-full hover:bg-[#E3E3E3] text-gray-600"><span class="material-symbols-outlined">add_circle</span></button>
                <input id="msg-input" type="text" class="flex-1 bg-transparent border-none outline-none py-3 px-2 text-[#1F1F1F]" placeholder="è¾“å…¥æŒ‡ä»¤ï¼Œæˆ–ä¸Šä¼ å¥æŠ˜..." onkeypress="if(event.key==='Enter') sendMessage()">
                <button class="p-2 rounded-full hover:bg-[#E3E3E3] text-gray-600"><span class="material-symbols-outlined">mic</span></button>
                <button onclick="sendMessage()" class="p-2 text-[#0B57D0] hover:bg-[#E3E3E3] rounded-full ml-1"><span class="material-symbols-outlined">send</span></button>
            </div>
            <p class="text-center text-[10px] text-gray-400 mt-3">Jarvis may display inaccurate info, including about people, so double-check its responses.</p>
        </div>
    </main>

    <script>
        // æ™¨æŠ¥å†…å®¹
        const briefingContent = `
# ğŸ“… æ¯æ—¥å†…é˜æ™¨æŠ¥ (2026-01-05)

**å‘ˆé€’æ—¶é—´**: 2026å¹´1æœˆ5æ—¥ 08:00
**å‘ˆé€’äºº**: Jarvis (å†…é˜é¦–è¾…)

---

## ğŸš¨ éœ€åœ£è£äº‹é¡¹ (Action Items)

### 1. RWA é¡¹ç›®ç™½çš®ä¹¦å®¡æ ¸
- **æ–‡ä»¶**: è´è±å¾·æœ€æ–°çš„ RWA åŸºé‡‘ææ¡ˆ
- **ä½ç½®**: \`D:\\My_System\\Inbox\\BlackRock_RWA_Whitepaper.pdf\`
- **çŠ¶æ€**: å·²ä¸‹è½½ï¼Œå¾…å®¡é˜…
- **å»ºè®®**: å¯åŠ¨æ·±åº¦åˆ†æï¼Œè¯„ä¼°æŠ•èµ„å¯è¡Œæ€§
- **ä¼˜å…ˆçº§**: ğŸ”´ é«˜

### 2. Evernote å¤‡ä»½è¿›åº¦
- **å½“å‰çŠ¶æ€**: æ•°æ®åº“åŒæ­¥å·²å®Œæˆ 30%
- **é¢„è®¡å®Œæˆ**: çº¦ 12 å°æ—¶
- **å»ºè®®**: ç»§ç»­åå°æŒ‚æœºä¸‹è½½
- **æ“ä½œ**: [ ] ç¡®è®¤ç»§ç»­å¤‡ä»½

---

## ğŸ“ å¥æŠ˜æ‘˜è¦ (Briefings)

### å…³äº RWA (Real World Assets) çš„æœ€æ–°åŠ¨æ€
> å¸‚åœºè¶‹åŠ¿æ˜¾ç¤ºï¼Œä¼ ç»Ÿé‡‘èæœºæ„æ­£åœ¨åŠ é€Ÿå°†å›½å€ºã€æˆ¿åœ°äº§ç­‰å®ç‰©èµ„äº§ä¸Šé“¾ã€‚

#### å…³é”®è§‚å¯Ÿï¼š
1. **æœºæ„å‚ä¸åº¦æå‡**: è´è±å¾·ã€å¯Œè¾¾ç­‰ä¼ ç»Ÿèµ„ç®¡å·¨å¤´åŠ é€Ÿå¸ƒå±€
2. **ç›‘ç®¡æ¡†æ¶å®Œå–„**: å¤šå›½ç›‘ç®¡æœºæ„æ­£åœ¨åˆ¶å®š RWA ç›¸å…³æ³•è§„
3. **æŠ€æœ¯åŸºç¡€è®¾æ–½æˆç†Ÿ**: è·¨é“¾æ¡¥ã€é¢„è¨€æœºç­‰æŠ€æœ¯æ–¹æ¡ˆæ—¥è¶‹å®Œå–„

#### æŠ•èµ„ç­–ç•¥å»ºè®®ï¼š
- **å…³æ³¨æ ‡çš„**: Ondo Finance (å›½å€ºä»£å¸åŒ–)ã€MakerDAO (æˆ¿åœ°äº§æŠµæŠ¼)
- **é£é™©æç¤º**: ç›‘ç®¡ä¸ç¡®å®šæ€§ã€æµåŠ¨æ€§é£é™©
- **æ—¶é—´çª—å£**: æœªæ¥ 3-6 ä¸ªæœˆä¸ºå…³é”®å¸ƒå±€æœŸ

---

## ğŸ“Š æ•°æ®åˆ†æ

\`\`\`python
# è‡ªåŠ¨åˆ†æè„šæœ¬å»ºè®®
def analyze_rwa_trend():
    import pandas as pd
    import numpy as np
    
    print("æ­£åœ¨æŠ“å– Bloomberg æ•°æ®...")
    # æ¨¡æ‹Ÿæ•°æ®
    data = {
        'metric': ['æœºæ„æµå…¥', 'ç›‘ç®¡è¿›å±•', 'æŠ€æœ¯æˆç†Ÿåº¦', 'å¸‚åœºæƒ…ç»ª'],
        'score': [85, 70, 80, 75],
        'trend': ['â†‘', 'â†’', 'â†‘', 'â†’']
    }
    df = pd.DataFrame(data)
    print(df)
    
    return "æ€»ä½“è¶‹åŠ¿: Bullish (çœ‹æ¶¨)"
\`\`\`
`;

        function togglePanel() {
            const panel = document.getElementById('reading-panel');
            const chat = document.getElementById('chat-container');
            const content = document.getElementById('panel-content');
            
            if (panel.classList.contains('hidden')) {
                // å±•å¼€
                panel.classList.remove('hidden', 'w-0');
                panel.classList.add('w-1/2', 'flex');
                chat.classList.add('w-1/2');
                // æ¸²æŸ“å†…å®¹
                content.innerHTML = marked.parse(briefingContent);
            } else {
                // æ”¶èµ·
                panel.classList.add('hidden', 'w-0');
                panel.classList.remove('w-1/2', 'flex');
                chat.classList.remove('w-1/2');
            }
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('hidden');
            sidebar.classList.toggle('flex');
        }

        async function sendMessage() {
            const input = document.getElementById('msg-input');
            const text = input.value.trim();
            if (!text) return;
            
            const msgs = document.getElementById('messages');
            const chatContainer = document.getElementById('chat-container');

            // ç”¨æˆ·æ¶ˆæ¯
            const userDiv = document.createElement('div');
            userDiv.className = 'flex justify-end mt-4';
            userDiv.innerHTML = `<div class="bg-[#F0F4F9] px-5 py-3 rounded-2xl rounded-tr-sm max-w-[80%] text-[#1F1F1F]">${text}</div>`;
            msgs.appendChild(userDiv);
            
            input.value = '';
            chatContainer.scrollTop = chatContainer.scrollHeight;

            // Loading å ä½ç¬¦
            const loadingDiv = document.createElement('div');
            loadingDiv.id = 'loading-msg';
            loadingDiv.className = 'flex gap-4 mt-4';
            loadingDiv.innerHTML = `
                <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white mt-1 flex-shrink-0">
                    <span class="material-symbols-outlined text-sm animate-spin">sync</span>
                </div>
                <div class="flex-1 markdown-body">
                    <p class="text-gray-500">Jarvis æ­£åœ¨æ€è€ƒ...</p>
                </div>`;
            msgs.appendChild(loadingDiv);
            chatContainer.scrollTop = chatContainer.scrollHeight;

            try {
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: text })
                });
                
                const data = await response.json();
                
                // ç§»é™¤ Loading
                const currentLoading = document.getElementById('loading-msg');
                if (currentLoading) msgs.removeChild(currentLoading);

                // AI å›å¤
                const aiDiv = document.createElement('div');
                aiDiv.className = 'flex gap-4 mt-4';
                
                let replyContent = data.reply || "æŠ±æ­‰ï¼Œæˆ‘é‡åˆ°äº†ä¸€äº›é—®é¢˜ã€‚";
                if (data.error) replyContent = `Error: ${data.error}`;

                aiDiv.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-blue-600 flex items-center justify-center text-white mt-1 flex-shrink-0">
                        <span class="material-symbols-outlined text-sm">smart_toy</span>
                    </div>
                    <div class="flex-1 markdown-body">
                        ${marked.parse(replyContent)}
                    </div>`;
                msgs.appendChild(aiDiv);
                
            } catch (error) {
                const currentLoading = document.getElementById('loading-msg');
                if (currentLoading) msgs.removeChild(currentLoading);
                
                const errDiv = document.createElement('div');
                errDiv.className = 'flex gap-4 mt-4';
                errDiv.innerHTML = `<div class="text-red-500">è¿æ¥æœåŠ¡å™¨å¤±è´¥: ${error.message}</div>`;
                msgs.appendChild(errDiv);
            }
            
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }
    </script>
</body>
</html>
